---
layout: post
title: vim 基本命令
---

#### vim 的基本概念

vim大致分可为这么几种状态，分别是命令模式、插入模式、视图模式、和底行模式，各模式的功能区分如下：

1) 命令行模式

控制屏幕光标的移动，字符、字或行的删除，移动复制某区段

2) 插入模式

按 i 进入插入模式,对文件的内容进行编辑操作，按 ESC 键可回到命令行模式

3) 视图模式

按 v 或者 V 进入视图模式，对文字区段进行选择,然后进行相应的操作（比如复制一段文字，删除一段文字等等）

4) 底行模式

按 : 或者 /  进入底行模式,其实底行模式也是命令模式的一种等

常使用底行模式对文件文件保存或退出vim，也可以设置编辑环境，如寻找字符串、列出行号……等

#### 基本命令

##### 1) 命令行模式

h 向左移动光标

j 向下移动光标

k 向上移动光标

l 向右移动光标

0 移到文件的开头

G 移动到文件的最后

$ 移动到光标所在行的“行尾”

^ 移动到光标所在行的“行首”

w 光标跳到下个字的开头

e 光标跳到下个字的字尾

b 光标回到上个字的开头

nl 光标移到该行的第n的位置，其中n是数字 如：5l 将光标移动到当前行的第5个字符处

x 每按一次，删除光标所在位置的“后面”一个字符

nx 删除光标所在位置的“后面”n个字符,n是数字,比如 5x

X 删除光标所在位置的“前面”一个字符

nX 删除光标所在位置的“前面”n个字符,n是数字,比如 5X

dd 删除光标所在行

ndd 从光标所在行开始删除n行

yw 将光标所在之处到字尾的字符复制到缓冲区中

nyw 复制n个字到缓冲区

yy 复制光标所在行到缓冲区

nyy 例如，6yy表示拷贝从光标所在的该行“往下数”6行文字

p 将缓冲区内的字符贴到光标所在位置注意：所有与“y”有关的复制命令都必须与“p”配合才能完成复制与粘贴功能

r 替换光标所在处的字符

R 替换光标所到之处的字符，直到按下「ESC」键为止

u 如果您误执行一个命令，可以马上按下「u」，回到上一个操作按多次“u”可以执行多次回复

cw 更改光标所在处的字到字尾处

cnw 例如，c3w表示更改3个字,其中n是数字

nG(或者ngg)例如，15G表示移动光标至文件的第15行的行首,其中n是数字

ctrl+g 列出光标所在行的行号

ci”清除引号内容

ci> 清除尖括号内容

cit 清除标签内的内容

zc 折叠

zC 对所在范围内所有嵌套的折叠点进行折叠

zo 展开折叠

zO 对所在范围内所有嵌套的折叠点展开

[z 到当前打开的折叠的开始处

]z 到当前打开的折叠的末尾处

zj 向下移动,到达下一个折叠的开始处,关闭的折叠也被计入

zk 向上移动到前一折叠的结束处,关闭的折叠也被计入

xp 交换两个字符的位置

ddp  上下两行调换

q/  搜索命令历史的窗口

q:  命令行命令历史的窗口

`移动屏幕`

ctrl+g 列出光标所在行的行

ctrl+b 屏幕往“后”移动一页

ctrl+f 屏幕往“前”移动一页

ctrl+u 屏幕往“后”移动半页

ctrl+d 屏幕往“前”移动半页

shift +3 选中并查找该词组

`跳转位置`

ctrl+o 回到更老的跳转位置

ctrl+i 向前跳转位置(两个命令前面可以加数字来表示倍数)

'.  跳到最后修改的那一行 (超级有用)

`.  不仅跳到最后修改的那一行，还要定位到修改点

` 改变大小写`

~     将光标下的字母改变大小写

3~    将光标位置开始的3个字母改变其大小写

g~~   改变当前行字母的大小写

U     将可视模式下选择的字母全改成大写字母

u     将可视模式下选择的字母全改成小写

gUU   将当前行的字母改成大写

3gUU  将从光标开始到下面3行字母改成大写

guu   将当前行的字母全改成小写

gUw   将光标下的单词改成大写。

guw   将光标下的单词改成小写。

##### 2) 插入模式

i 在光标的前面插入字符

I 在当前行的第一个字符前插入字符

o 在当前行的下一行插入新的一行,并在新的一行的第一个字符处插入字符

O  在当前行的上一行插入新的一行,并在新的一行的第一个字符处插入字符

a 在光标的后面插入字符

A 在当前行的最后面插入字符

按[Esc]回到命令模式

##### 3) 视图模式

vi” 选择引号内容

vi> 选择尖括号内容

vit 选择标签内的内容

va” 选择包括引号在内的内容

va> 选择包括尖括号在内的内容

vat 选择整个标签

##### 4) 底行模式

:w filename 将文件以指定的文件名filename保存

:wq 存盘并退出vim

:q! 不存盘强制退出vim

:set nu 显示行号

:15 回车，跳到文件第15行

/关键字, 先按「/」键，再输入您想寻找的字符，如果第一次找的关键字不是您想要的，可以一直按「n」会往后寻找到您要的关键字为止

?关键字, 先按「?」键，再输入您想寻找的字符，如果第一次找的关键字ä¡

:-n,+n d  '-'表示当前行的上n行，'+'表示当前行的下n行,比如命令':-2,+2 d'的意思，就是说删除但前行的上2行到当前行的下2行

:n pu  将剪切板中的内容粘贴到n行

:e filename  在当前编辑的窗口中打开指定的“filename”的文件进行编辑操作

:p  文件操作，前一个文件

:n 文件操作，下一个文件

:last 文件操作，最后一个文件

:!cmd 执行shell命令

:sh  进入shell

:exit 退出shell

:ju(mps)  列出你跳转的足迹

:help jump-motions

:history  列出历史命令记录

:his c  命令行命令历史

:his s  搜索命令历史

:<C-F>  历史命令记录的窗口

按[Esc]回到命令模式






1. 折叠方式 
可用选项 'foldmethod' 来设定折叠方式：set fdm=*****。

有 6 种方法来选定折叠：

          manual           手工定义折叠

indent             更多的缩进表示更高级别的折叠

expr                用表达式来定义折叠

syntax             用语法高亮来定义折叠

diff                  对没有更改的文本进行折叠

marker            对文中的标志折叠

注意，每一种折叠方式不兼容，如不能即用expr又用marker方式，我主要轮流使用indent和marker方式进行折叠。


使用时，用：set fdm=marker 命令来设置成marker折叠方式（fdm是foldmethod的缩写）。

要使每次打开vim时折叠都生效，则在.vimrc文件中添加设置，如添加：set fdm=syntax，就像添加其它的初始化设置一样。

2. 折叠命令

选取了折叠方式后，我们就可以对某些代码实施我们需要的折叠了，由于我使用indent和marker稍微多一些，故以它们的使用为例：

如果使用了indent方式，vim会自动的对大括号的中间部分进行折叠，我们可以直接使用这些现成的折叠成果。

在可折叠处（大括号中间）：

zc      折叠

zC     对所在范围内所有嵌套的折叠点进行折叠 

zo      展开折叠

zO     对所在范围内所有嵌套的折叠点展开

[z       到当前打开的折叠的开始处。

]z       到当前打开的折叠的末尾处。

zj       向下移动。到达下一个折叠的开始处。关闭的折叠也被计入。

zk      向上移动到前一折叠的结束处。关闭的折叠也被计入。



当使用marker方式时，需要用标计来标识代码的折叠，系统默认是{{{和}}}，最好不要改动之：）

我们可以使用下面的命令来创建和删除折叠：

zf      创建折叠，比如在marker方式下：

zf56G，创建从当前行起到56行的代码折叠；

10zf或10zf+或zf10↓，创建从当前行起到后10行的代码折叠。

10zf-或zf10↑，创建从当前行起到之前10行的代码折叠。

在括号处zf%，创建从当前行起到对应的匹配的括号上去（（），{}，[]，<>等）。

zd      删除 (delete) 在光标下的折叠。仅当 'foldmethod' 设为 "manual" 或 "marker" 时有效。

zD     循环删除 (Delete) 光标下的折叠，即嵌套删除折叠。

仅当 'foldmethod' 设为 "manual" 或 "marker" 时有效。

zE     除去 (Eliminate) 窗口里“所有”的折叠。

仅当 'foldmethod' 设为 "manual" 或 "marker" 时有效。

